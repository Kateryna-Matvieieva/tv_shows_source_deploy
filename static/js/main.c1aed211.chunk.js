(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,a){e.exports=a(54)},36:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(4),c=a.n(l),o=(a(36),a(21)),u=a(22),i=a(29),s=a(23),m=a(30),p=a(1),f="START_REQUEST",d="GET_COUNT_OF_PAGES",v="GET_FILTER",g="GET_QUERY",b="GET_ERROR",E="GET_RESPONSE",h="GET_GENRES",y="GET_PAGE",w="GET_URL",O=function(e){var t=e.results;return{type:E,payload:t}},_=function(e){var t=e.page;return{type:y,payload:t}},T=function(e){var t=e.total_pages;return{type:d,payload:t}},j=function(e){return{type:w,payload:e}},k=function(e){var t=e.genres;return{type:h,payload:t}},P=function(e,t){return{type:v,payload:{filter:e,name:t}}},S=function(e){return{type:b,payload:e}},x=function(e){return{type:f,payload:e}},N=a(7),C=a.n(N),R=a(13),G=a(14),U=a.n(G);function q(e){var t=e.page,a=void 0===t?1:t,n=e.url;return function(){var e=Object(R.a)(C.a.mark(function e(t){var r,l;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(x(!0)),e.next=3,U()("".concat(n,"&page=").concat(a));case 3:if(200===(r=e.sent).status){e.next=8;break}t(S(!0)),e.next=12;break;case 8:return e.next=10,r.json();case 10:(l=e.sent).results.length<1?t(S(!0)):(t(T(l)),t(O(l)));case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}var D=function(e){var t,a=e.dispatch,n=function(e){if(e.preventDefault(),t.value.trim()){var n=encodeURIComponent(t.value.trim()),r="".concat("https://api.themoviedb.org/3","/search/tv?query=").concat(n,"&").concat("api_key=696d475c5616f9c15214877fbdf5bd6e&language=en-US");a(j(r)),a(_({page:1})),a(function(e){return{type:g,payload:e}}(n)),a(q({url:r}))}};return r.a.createElement("div",null,r.a.createElement("form",{onChange:function(e){n(e)},onSubmit:function(e){n(e),t.value=""}},r.a.createElement("label",{htmlFor:"title"},"Search"),r.a.createElement("input",{name:"title",placeholder:"Type title of TV Show",ref:function(e){t=e}}),r.a.createElement("button",{className:"submit-button",type:"submit"},"Search TV Show")))},I=D=Object(p.b)()(D),L=function(e){var t=e.children,a=e.onClick;return r.a.createElement("a",{href:"/",onClick:function(e){switch(e.preventDefault(),t){case"Popular":a({filterType:"popular"});break;case"On the air":a({filterType:"on_the_air"});break;case"Top rated":a({filterType:"top_rated"})}}},r.a.createElement("button",null,t))};var F=Object(p.b)(function(e){return{currentPage:e.currentPage,countOfPages:e.countOfPages}},function(e){return{onClick:function(t){var a=t.filterType,n="".concat("https://api.themoviedb.org/3","/tv/").concat(a||"popular","?").concat("api_key=696d475c5616f9c15214877fbdf5bd6e&language=en-US");e(j(n)),e(P(a)),e(_({page:1})),e(q({url:n}))}}})(L),M=a(10),V=function(e){var t,a,n,l,c=e.dispatch,o=e.genres,u=Object.entries(o);return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){!function(e){e.preventDefault();var r=[],o="";l.state.value&&(r.push("".concat(l.state.value.label)),o+="&sort_by=".concat(l.state.value.value)),t.value&&(r.push("".concat(t.value," year release")),o+="&first_air_date_year=".concat(t.value)),a.state.value&&(r.push("with ".concat(a.state.value.map(function(e){return e.label}).join(", ")," genre")),o+="&with_genres=".concat(a.state.value.map(function(e){return e.value}).join(","))),n.state.value&&(r.push("without ".concat(n.state.value.map(function(e){return e.label}).join(", ")," genre")),o+="&without_genres=".concat(n.state.value.map(function(e){return e.value}).join(",")));var u="".concat("https://api.themoviedb.org/3","/discover/tv?language=en-US").concat(o,"&").concat("api_key=696d475c5616f9c15214877fbdf5bd6e");c(j(u)),c(_({page:1})),c(P("".concat(r.join(", ")))),c(q({url:u}))}(e)}},r.a.createElement("div",{className:"sort-container"},r.a.createElement("div",{className:"select-class"},r.a.createElement("label",{htmlFor:"with_genres"},"With genres"),r.a.createElement(M.a,{name:"with_genres",isMulti:!0,ref:function(e){a=e},options:u.map(function(e,t){return{value:e[0],label:e[1]}})})),r.a.createElement("div",{className:"select-class"},r.a.createElement("label",{htmlFor:"without_genres"},"Without genres"),r.a.createElement(M.a,{name:"without_genres",isMulti:!0,ref:function(e){n=e},options:u.map(function(e,t){return{value:e[0],label:e[1]}})})),r.a.createElement("div",{className:"select-class"},r.a.createElement("label",{htmlFor:"Sort"},"Sort"),r.a.createElement(M.a,{name:"Sort",ref:function(e){l=e},options:[{value:"first_air_date.desc",label:"The newest"},{value:"first_air_date.asc",label:"The oldest"},{value:"vote_average.desc",label:"Most voted"},{value:"vote_average.asc",label:"Less voted"},{value:"popularity.asc",label:"Less popular"}]}))),r.a.createElement("div",{className:"sort-container"},r.a.createElement("div",{className:"select-class"},r.a.createElement("label",{htmlFor:"year"},"Year of release"),r.a.createElement("input",{name:"year",placeholder:"Type year of release",ref:function(e){t=e}})),r.a.createElement("button",{className:"submit-button",type:"submit"},"Sort TV Show"))))};var A=V=Object(p.b)(function(e){return{genres:e.genres}})(V),W=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.onLoad()}},{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("h1",null,"Your favorite TV-shows"),r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",null,r.a.createElement(F,null,"Popular"),r.a.createElement(F,null,"On the air"),r.a.createElement(F,null,"Top rated")),r.a.createElement(I,null)),r.a.createElement(A,null))}}]),t}(n.Component),Y=Object(p.b)(null,function(e){return{onLoad:function(){e(function(){var e=Object(R.a)(C.a.mark(function e(t){var a,n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U()("https://api.themoviedb.org/3/genre/tv/list?&api_key=696d475c5616f9c15214877fbdf5bd6e&language=en-US");case 2:if(200===(a=e.sent).status){e.next=7;break}t(S(!0)),e.next=11;break;case 7:return e.next=9,a.json();case 9:n=e.sent,t(k(n));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());var t="".concat("https://api.themoviedb.org/3","/tv/popular?").concat("api_key=696d475c5616f9c15214877fbdf5bd6e&language=en-US","&page=1");e(j(t)),e(P("popular")),e(q({url:t}))}}})(W),B=function(e){var t=e.children,a=e.showId,n=e.onClick,l=e.name;return r.a.createElement("a",{href:"/",onClick:function(e){switch(e.preventDefault(),t){case"Recommendations":n({filterType:"recommendations",id:a,name:l});break;case"Similar":n({filterType:"similar",id:a,name:l})}}},r.a.createElement("button",null,t))};var J=Object(p.b)(function(e){return{currentPage:e.currentPage,countOfPages:e.countOfPages}},function(e){return{onClick:function(t){var a=t.filterType,n=t.id,r=t.name,l="".concat("https://api.themoviedb.org/3","/tv/").concat(n,"/").concat(a,"?&").concat("api_key=696d475c5616f9c15214877fbdf5bd6e&language=en-US");e(j(l)),e(P(a,r)),e(_({page:1})),e(q({url:l}))}}})(B),Q=function(e){var t=e.item,a=e.img,n=e.genres,l=e.index;return r.a.createElement("tr",null,r.a.createElement("td",null,l),r.a.createElement("td",null,t.name,r.a.createElement("img",{src:a.src||"../download.png",alt:"Poster",width:"165",height:"268"})),r.a.createElement("td",null,Math.round(t.popularity)),r.a.createElement("td",null,t.first_air_date),r.a.createElement("td",null,t.genre_ids.map(function(e){return n[e]}).filter(function(e){return void 0!==e}).join(", ")),r.a.createElement("td",{onMouseEnter:function(e){return e.currentTarget.innerText=t.overview},onMouseLeave:function(e){return e.currentTarget.innerText=t.overview.slice(0,250)+"....."}},t.overview.slice(0,350)+"....."),r.a.createElement("td",null,r.a.createElement(J,{showId:t.id,name:t.name},"Recommendations"),r.a.createElement(J,{showId:t.id,name:t.name},"Similar")))},$=function(e){var t=e.children,a=e.onClick,n=e.currentPage,l=e.countOfPages,c=e.url;return r.a.createElement("a",{href:"/",onClick:function(e){switch(e.preventDefault(),t){case"next":n<l&&a({page:n+1,url:c});break;case"prev":!(n>1)||a({page:n-1,url:c})}"number"==typeof t&&a({page:t,url:c})}},r.a.createElement("button",null,t))};var z=Object(p.b)(function(e){return{currentPage:e.currentPage,countOfPages:e.countOfPages,url:e.url}},function(e){return{onClick:function(t){var a=t.page,n=t.url;e(_({page:a})),e(q({url:n,page:a}))}}})($),H=function(e){var t=e.currentPage,a=e.countOfPages,n=e.url,l=e.children,c=a>9?9:a,o=new Array(c).fill(void 0),u=l[0],i=l[1],s=l[2];return r.a.createElement("div",null,r.a.createElement("p",null,"Page ",t,"from ",a),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"page-container"},u,o.map(function(e,l){return r.a.createElement(z,{url:n,key:l},t+c<a-t?t+l:a+l+1-o.length)}),i),s))};var K=Object(p.b)(function(e){return{currentPage:e.currentPage,countOfPages:e.countOfPages}})(H),X=function(e){var t,a=e.dispatch,n=e.url;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var r=+t.value.trim();r&&"number"===typeof r&&(a(_({page:r})),a(q({url:n,page:r})),t.value="")}},r.a.createElement("input",{placeholder:"Type page number",ref:function(e){t=e}}),r.a.createElement("button",{className:"submit-button",type:"submit"},"Go to page")))};var Z=X=Object(p.b)(function(e){return{url:e.url}})(X),ee=function(e){var t=e.url;return r.a.createElement("div",null,r.a.createElement(K,{url:t},r.a.createElement(z,{url:t},"prev"),r.a.createElement(z,{url:t},"next"),r.a.createElement(Z,null)))},te=function(){return r.a.createElement("div",{className:"no-data-container"},r.a.createElement("img",{src:"https://loading.io/spinners/microsoft/lg.rotating-balls-spinner.gif",alt:"Loading..."}))},ae=function(){return r.a.createElement("div",{class:"no-data-container"},r.a.createElement("img",{src:"https://webmarketingschool.com/wp-content/uploads/2018/03/nojobsfound.png",alt:"Sorry, here is an error"}))},ne=function(e){var t=e.state;return r.a.createElement("h2",null,t.query?'The result on "'.concat(t.query,'" query search'):t.name?"TV Shows ".concat(t.filter,' to "').concat(t.name,'"'):'TV Shows filtered by "'.concat(t.filter,'"'))};var re=Object(p.b)(function(e){return{title:{query:e.query,name:e.name,filter:e.filter},state:e}})(function(e){var t=e.state,a=e.title;return t.error?r.a.createElement(ae,null):t.loading?r.a.createElement(te,null):r.a.createElement("div",{className:"tv-table"},r.a.createElement(ne,{state:a}),r.a.createElement(ee,null),r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\u2116"),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Popularity"),r.a.createElement("th",null,"Year"),r.a.createElement("th",null,"Genre"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Details")),t.data.map(function(e,a){return r.a.createElement(Q,{key:a,item:e,img:t.imgs[a],genres:t.genres,index:20*t.currentPage-19+a})}))),r.a.createElement(ee,null))}),le=function(){return r.a.createElement("div",null,r.a.createElement(Y,null),r.a.createElement(re,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ce=a(6),oe=a(3);var ue=a(27),ie=a(28),se=a.n(ie),me=Object(ce.c)(function(e,t){switch(t.type){case h:var a={};return t.payload.forEach(function(e){a[e.id]=e.name}),Object(oe.a)({},e,{genres:a});case f:return Object(oe.a)({},e,{loading:t.payload,error:null});case E:var n=t.payload.map(function(e){var t=new Image;return t.src=e.poster_path?"https://image.tmdb.org/t/p/w185_and_h278_bestv2/"+e.poster_path:"download.png",t});return Object(oe.a)({},e,{data:t.payload,imgs:n,loading:!1});case y:return Object(oe.a)({},e,{currentPage:t.payload});case w:return Object(oe.a)({},e,{url:t.payload});case d:return Object(oe.a)({},e,{countOfPages:t.payload});case v:return Object(oe.a)({},e,{filter:t.payload.filter.replace(/_/g," "),name:t.payload.name,query:""});case g:return Object(oe.a)({},e,{query:decodeURIComponent(t.payload),filter:""});case b:return Object(oe.a)({},e,{loading:!1,error:t.payload,data:[]});default:return e}},{data:[],imgs:[],genres:[],loading:!0,error:!1,filter:"",name:"",query:"",countOfPages:1,currentPage:1,url:""},Object(ce.a)(ue.a,se.a));c.a.render(r.a.createElement(p.a,{store:me},r.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,2,1]]]);
//# sourceMappingURL=main.c1aed211.chunk.js.map